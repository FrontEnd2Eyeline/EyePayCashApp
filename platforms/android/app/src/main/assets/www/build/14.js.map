{"version":3,"sources":["../../src/pages/modal-transaction/modal-transaction.module.ts","../../src/pages/modal-transaction/modal-transaction.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {ModalTransactionPage} from './modal-transaction';\nimport {BrMaskerModule} from \"brmasker-ionic-3\";\nimport {TranslateModule} from \"@ngx-translate/core\";\n\n@NgModule({\n  declarations: [\n    ModalTransactionPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalTransactionPage),\n    TranslateModule,\n    BrMaskerModule,\n  ],\n})\nexport class ModalTransactionPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-transaction/modal-transaction.module.ts","import {Component} from '@angular/core';\nimport {\n  AlertController,\n  IonicPage,\n  LoadingController,\n  NavController,\n  NavParams,\n  ToastController,\n  ViewController\n} from 'ionic-angular';\nimport {Api} from \"../../providers/api\";\nimport {AuthUserProvider} from \"../../providers/auth-user/auth-user\";\nimport {CurrencyPipe} from \"@angular/common\";\nimport {ModalErrorProvider} from '../../providers/modal-error/modal-error';\n\n/**\n * Generated class for the ModalTransactionPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n\tselector: 'page-modal-transaction',\n\ttemplateUrl: 'modal-transaction.html',\n})\nexport class ModalTransactionPage {\n\n\tpublic moneda: any = null;\n\tpublic userCountry: any = null;\n\tpublic currency: any = null;\n\tpublic country: any;\n\n  private transaction: any = {\n    amount_local: null, // monto de dinero a transferir\n    phone_user_des: null, // numero de telefono de la persona a la que se va a transferir\n    key_user: null,  // clave manual de la transacciòn 4 digitos\n    country_id: null,  // id del pais\n    coin_id: null,     // id de la moneda\n    code_phone: null,   // Codigo del celular en el pais\n  };\n\n\n\tconstructor(\n\t\tpublic navParams: NavParams,\n\t\tpublic viewCtrl: ViewController,\n\t\tpublic toastCtrl: ToastController,\n\t\tpublic loadingCtrl: LoadingController,\n\t\tprivate api: Api,\n\t\tprivate userProvider: AuthUserProvider,\n\t\tpublic navCtrl: NavController,\n\t\tpublic alertCtrl: AlertController,\n\t\tprivate pipe: CurrencyPipe,\n\t\tpublic errorProvider: ModalErrorProvider,\n\t) {\n\t}\n\n\tionViewWillLoad() {\n\t\tthis.userCountry = this.navParams.get('infoCountry');\n\t\tthis.moneda = this.navParams.get('moneda');\n\t\tthis.currency = this.navParams.get('currency');\n\t\tconsole.log(this.currency);\n\t\tthis.transaction.country_id = this.navParams.get('pais_id');\n\t\tthis.transaction.code_phone = this.navParams.get('code_phohe');\n\t\tthis.transaction.coin_id = this.moneda.id;\n\t\tthis.country = this.navParams.get('country');\n\t}\n\n\tcloseModal() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tdoTrasaction() {\n\n\t\tlet loading = this.loadingCtrl.create({\n      spinner: 'hide',\n      content: \"<img src='assets/imgs/buho.png'>\",\n\t\t});\n\t\tloading.present();\n\t\t// let objtoSub = this.transaction;\n\t\t// let amount = objtoSub.amount_local + \"\";\n\t\t// let index = amount.indexOf(',');\n\t\t// if (index > 0) {\n\t\t// objtoSub.amount_local = this.transaction.amount_local.replace(new RegExp('\\\\.', 'g'), '');\n\t\t//   objtoSub.amount_local = this.transaction.amount_local.replace(',', '.');\n\t\tif(this.userProvider.accessParam() != null){\n      this.api.post('app/transaction', this.transaction, this.userProvider).then((data: any) => {\n        this.closeModal();\n        this.errorProvider.obj.message = 'Transacción solicitada correctamente';\n        this.errorProvider.presentModal();\n        this.navCtrl.setPages([{ page: 'HomePage' }, { page: 'TransactionResumePage', params: data }]);\n        loading.dismiss();\n      }).catch(error => {\n        loading.dismiss();\n        let mensaje = \"\";\n        error.error.forEach(data => {\n          mensaje += data.message + \"\\n\";\n        });\n        this.errorProvider.obj.message = mensaje;\n        this.errorProvider.presentModal();\n      });\n\t\t}else{\n      this.errorProvider.obj.message = 'No se pudo realizar la solicitud. Por favor intentelo de nuevo.';\n      this.errorProvider.presentModal();\n\t\t}\n\t}\n\n\tconfirmTrasaction() {\n\t\tif (\n\t\t\tthis.transaction.amount_local != null &&\n\t\t\tthis.transaction.phone_user_des != null &&\n\t\t\tthis.transaction.key_user != null &&\n\t\t\tthis.transaction.key_user != '' &&\n\t\t\tthis.transaction.country_id != null &&\n\t\t\tthis.transaction.coin_id != null) {\n\t\t\tif (this.transaction.phone_user_des > 8) {\n\t\t\t\tif (this.transaction.amount_local > 0) {\n\t\t\t\t\tlet alerta = this.alertCtrl.create({\n\t\t\t\t\t\ttitle: 'Confirmar transacción',\n\t\t\t\t\t\tmessage: 'Destino: ' + this.transaction.phone_user_des + ' <br> Clave:' + this.transaction.key_user + '<br>' +\n\t\t\t\t\t\t\t'Monto:' + this.getCurrency(this.transaction.amount_local) + \" \" + this.country.currency_code,\n\t\t\t\t\t\tbuttons: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: 'Cancelar',\n\t\t\t\t\t\t\t\trole: 'cancel',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttext: 'Solicitar',\n\t\t\t\t\t\t\t\thandler: () => {\n\t\t\t\t\t\t\t\t\tthis.doTrasaction();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\t\t\t\t\talerta.present();\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorProvider.obj.message = 'El monto de la transacción debe ser mayor a cero';\n\t\t\t\t\tthis.errorProvider.presentModal();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.errorProvider.obj.message = 'Número telefónico debe tener más de 9 dígitos';\n\t\t\t\tthis.errorProvider.presentModal();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.errorProvider.obj.message = 'Todos los datos son obligatorios';\n\t\t\tthis.errorProvider.presentModal();\n\t\t}\n\t}\n\n\tgetCurrency(amount: number) {\n\t\treturn this.pipe.transform(amount, '$ ', true, '1.0-0');\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-transaction/modal-transaction.ts"],"sourceRoot":""}