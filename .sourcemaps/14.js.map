{"version":3,"sources":["../../src/pages/account/account.module.ts","../../src/pages/account/account.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {AccountPage} from './account';\nimport {BrMaskerModule} from \"brmasker-ionic-3\";\n\n@NgModule({\n  declarations: [\n    AccountPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AccountPage),\n    BrMaskerModule,\n  ],\n})\nexport class AccountPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.module.ts","import {Component} from '@angular/core';\nimport {\n  AlertController,\n  IonicPage,\n  LoadingController,\n  ModalController,\n  NavController,\n  NavParams,\n  ToastController\n} from 'ionic-angular';\nimport {Api} from \"../../providers/api\";\nimport {AuthUserProvider} from \"../../providers/auth-user/auth-user\";\n\n/**\n * Generated class for the AccountPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-account',\n  templateUrl: 'account.html',\n})\nexport class AccountPage {\n\n  private usuario: any = null;\n  private country: any = null;\n  public type = 'password';\n  public showPass = false;\n  public type2 = 'password';\n  public showPass2 = false;\n\n//=========================  CONTROL DE VALIDACIÓN DEL USUARIO\n  private view_Verify_Phone = false;\n  private view_Verify_Mail = false;\n\n  private view_Btn_phone = false;\n  private view_Btn_mail = false;\n\n  private code_Verify_Phone = null;\n  private code_Verify_Mail = null;\n\n  private responseVerify: any = null;\n//=========================== CONTROL DE INPUTS\n  public control_label :string = \"label\";\n\n\n\n  constructor(public navCtrl: NavController,\n              public navParams: NavParams,\n              protected api: Api,\n              protected userProvider: AuthUserProvider,\n              public toastCtrl: ToastController,\n              public loadingCtrl: LoadingController,\n              public modal: ModalController,\n              public alertCtrl: AlertController,\n  ) {\n    this.getInfo();\n  }\n\n\n  private getInfo() {\n    this.usuario = this.userProvider.user_Info;\n    this.country = this.userProvider.user_Country;\n    this.controlBtns();\n  }\n\n\n  actualizar() {\n\n    const confirm = this.alertCtrl.create({\n      message: '¿Desea actualizar la información?',\n      buttons: [\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n        },\n        {\n          text: 'Actualizar',\n          handler: () => {\n            let loading = this.loadingCtrl.create({\n              spinner: 'dots',\n            });\n            loading.present();\n            if (this.usuario.first_name != null && this.usuario.last_name != null &&\n              this.usuario.first_name != \"\" && this.usuario.last_name != \"\") {\n              if (this.usuario.first_name.length > 2 && this.usuario.last_name.length > 2) {\n                this.api.post('account/update-info', this.usuario, this.userProvider)\n                  .then((data: any) => {\n                    let toast = this.toastCtrl.create({\n                      message: 'Información personal actualizada correctamente.',\n                      showCloseButton: true,\n                      closeButtonText: 'cerrar',\n                      position: 'middle',\n                    });\n                    this.usuario = data;\n                    loading.dismiss();\n                    toast.present();\n                  }).catch(error => {\n                  // let mensaje = 'Por favor corrija lo siguiente \\n';\n                  let mensaje = '';\n                  error.error.forEach(data => {\n                    mensaje += data.field + \": \" + data.message + \"\\n\";\n                  });\n                  let toast = this.toastCtrl.create({\n                    message: mensaje,\n                    showCloseButton: true,\n                    closeButtonText: 'cerrar',\n                    position: 'middle'\n                  });\n                  loading.dismiss();\n                  toast.present();\n                });\n              } else {\n                loading.dismiss();\n                let toast = this.toastCtrl.create({\n                  message: 'Nombre y apellido deben contener más de 2 caracteres.',\n                  showCloseButton: true,\n                  closeButtonText: 'cerrar',\n                  position: 'middle',\n                });\n                toast.present();\n              }\n            } else {\n              let toast = this.toastCtrl.create({\n                message: 'Todos los campos son obligatorios.',\n                showCloseButton: true,\n                closeButtonText: 'cerrar',\n                position: 'middle',\n              });\n              loading.dismiss();\n              toast.present();\n            }\n          }\n        }\n      ]\n    });\n    confirm.present();\n\n\n\n  }\n\n  cerrarSesion() {\n    window.localStorage.clear();\n    this.navCtrl.setRoot('LoginPage');\n  }\n\n  reenviarConfirm(tipo) {\n    this.code_Verify_Phone = null;\n    this.code_Verify_Mail = null;\n    this.responseVerify = null;\n    if (tipo == 'phone') {\n      this.view_Verify_Phone = true;\n      this.view_Verify_Mail = false;\n      this.view_Btn_mail = false;\n\n    } else {\n      this.view_Verify_Phone = false;\n      this.view_Btn_phone = false;\n      this.view_Verify_Mail = true;\n    }\n    this.api.get(\"account/re-send-verify\", this.userProvider, {type: tipo}).then((data: any) => {\n      this.responseVerify = data;\n    }).catch()\n  }\n\n  validateCode(tipo) {\n    let guardar = false;\n    if (tipo == 'mail') {\n      if (this.code_Verify_Mail == this.responseVerify.mail_code) {\n        guardar = true;\n      } else {\n        guardar = false;\n        let toast = this.toastCtrl.create({\n          message: 'Códigos no coinciden',\n          position: 'middle',\n          showCloseButton: true,\n          closeButtonText: 'Cerrar'\n        });\n        toast.present();\n      }\n    } else {\n      if (this.code_Verify_Phone == this.responseVerify.phone_code) {\n        guardar = true;\n      } else {\n        guardar = false;\n        let toast = this.toastCtrl.create({\n          message: 'Códigos no coinciden',\n          position: 'middle',\n          showCloseButton: true,\n          closeButtonText: 'Cerrar'\n        });\n        toast.present();\n      }\n    }\n    this.code_Verify_Mail = null;\n    this.code_Verify_Phone = null;\n    if (guardar)\n      this.api.get(\"account/confirm-verify\", this.userProvider, {\"type\": tipo, id: this.responseVerify.id})\n        .then((data: any) => {\n          if (data.success == \"ok\") {\n            if (tipo == 'mail')\n              this.userProvider.User_Verify.is_mail_verify = 1;\n            else\n              this.userProvider.User_Verify.is_phone_verify = 1;\n          }\n          this.responseVerify = null;\n          this.view_Verify_Mail = false;\n          this.view_Verify_Phone = false;\n          this.controlBtns();\n        })\n  }\n\n  cancelValidation() {\n    this.responseVerify = null;\n    this.view_Verify_Mail = false;\n    this.view_Verify_Mail = false;\n    this.code_Verify_Phone = null;\n    this.code_Verify_Mail = null;\n  }\n\n  controlBtns() {\n    if (this.userProvider.User_Verify.is_mail_verify == 0)\n      this.view_Btn_mail = true;\n    else\n      this.view_Btn_mail = false;\n    if (this.userProvider.User_Verify.is_phone_verify == 0)\n      this.view_Btn_phone = true;\n    else\n      this.view_Btn_phone = false;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/account/account.ts"],"sourceRoot":""}