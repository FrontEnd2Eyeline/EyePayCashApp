{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/components/components.module.ts","../../src/components/msg-error/msg-error.ts","../../src/pages/login/login.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAuC;AACO;AACZ;AACkC;AAChB;AAYpD;IAAA;IACA,CAAC;IADY,eAAe;QAV3B,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yDAAS;aACV;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,yDAAS,CAAC;gBACnC,4EAAe;gBACf,uFAAgB;aACjB;SACF,CAAC;OACW,eAAe,CAC3B;IAAD,sBAAC;CAAA;AAD2B;;;;;;;;;;;;;;;;;;;AChBW;AACiB;AACX;AAO7C;IAAA;IAA+B,CAAC;IAAnB,gBAAgB;QAL5B,uEAAQ,CAAC;YACT,YAAY,EAAE,CAAC,+EAAiB,CAAC;YACjC,OAAO,EAAE,CAAC,qEAAY,CAAC;YACvB,OAAO,EAAE,CAAC,+EAAiB,CAAC;SAC5B,CAAC;OACW,gBAAgB,CAAG;IAAD,uBAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;ACTkB;AACJ;AAC8B;AAOzE;IAKE;IAAgB,CAAC;IAEjB,sBAAI,2CAAY;aAAhB;YACE,GAAG,CAAC,CAAC,IAAI,YAAY,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;gBAC7C,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;oBAC7E,MAAM,CAAC,4FAAkB,CAAC,wBAAwB,CAAC,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBACjH,CAAC;YACH,CAAC;YAED,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;;;OAAA;IAbQ;QAAR,oEAAK,EAAE;kCAAU,mEAAW;sDAAC;IACrB;QAAR,oEAAK,EAAE;;mDAAc;IAHX,iBAAiB;QAJ7B,wEAAS,CAAC;YACT,QAAQ,EAAE,WAAW;YACrB,QAAQ,EAAE,yEAAyE;SACpF,CAAC;;OACW,iBAAiB,CAgB7B;IAAD,wBAAC;CAAA;AAhB6B;;;;;;;;;;;;;;;;;;;;;;;;;ACTiB;AACoE;AAC9C;AACU;AACJ;AAC3B;AAOhD;IAyBE,mBAAmB,OAAsB,EACtB,WAA8B,EAC3B,YAA8B,EACjC,SAA0B,EAC1B,SAA0B,EAC1B,WAAwB,EACxB,aAAiC,EAChC,QAAwB;QAPzB,YAAO,GAAP,OAAO,CAAe;QACtB,gBAAW,GAAX,WAAW,CAAmB;QAC3B,iBAAY,GAAZ,YAAY,CAAkB;QACjC,cAAS,GAAT,SAAS,CAAiB;QAC1B,cAAS,GAAT,SAAS,CAAiB;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,kBAAa,GAAb,aAAa,CAAoB;QAChC,aAAQ,GAAR,QAAQ,CAAgB;QA1B5C,uCAAuC;QACvC,wCAAwC;QACxC,2BAA2B;QAC3B,8BAA8B;QAC9B,SAAS;QACT,EAAE;QACF,oCAAoC;QACpC,2BAA2B;QAC3B,+BAA+B;QAC/B,0BAA0B;QAC1B,6EAA6E;QAC7E,OAAO;QACP,MAAM;QAEN,cAAS,GAAG,IAAI,iEAAS,CAAC;YACxB,IAAI,EAAE,IAAI,mEAAW,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,KAAK,CAAC,CAAC;YAClE,QAAQ,EAAE,IAAI,mEAAW,CAAC,EAAE,EAAE,CAAC,kEAAU,CAAC,QAAQ,EAAE,kEAAU,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9E,CAAC,CAAC;IAWH,CAAC;IAED,oCAAgB,GAAhB;QACE,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;IAC9B,CAAC;IACD,yBAAK,GAAL;QAAA,iBAmCC;QAlCC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;YACzB,IAAI,UAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;gBACrC,OAAO,EAAE,MAAM;gBACf,OAAO,EAAE,kCAAkC;aAC5C,CAAC,CAAC;YAEH,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC;iBAC9E,IAAI,CAAC,UAAC,IAAS;gBACd,UAAQ,CAAC,OAAO,EAAE,CAAC;gBACnB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,CAAC,CAAC;oBACzB,EAAE,EAAC,KAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAC;wBAC7B,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;oBACnC,CAAC;oBAAA,IAAI,EAAC;wBACJ,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,GAAG,4CAA4C,CAAC;wBAC9E,KAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;wBAClC,KAAI,CAAC,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;oBACpC,CAAC;oBACD,UAAQ,CAAC,OAAO,EAAE,CAAC;gBACrB,CAAC;gBAAC,IAAI,CAAC,CAAC;oBACN,UAAQ,CAAC,OAAO,EAAE,CAAC;gBACrB,CAAC;YACH,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;gBACf,UAAQ,CAAC,OAAO,EAAE,CAAC;gBACnB,IAAI,OAAO,GAAG,EAAE,CAAC;gBACjB,EAAE,EAAC,gFAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,EAAC;oBACvB,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,cAAI;wBACtB,OAAO,IAAI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACjC,CAAC,CAAC,CAAC;gBACL,CAAC;gBAAA,IAAI;oBACL,OAAO,GAAG,iCAAiC,CAAC;gBAC5C,KAAI,CAAC,aAAa,CAAC,GAAG,CAAC,OAAO,GAAG,OAAO,CAAC;gBACzC,KAAI,CAAC,aAAa,CAAC,YAAY,EAAE,CAAC;YACpC,CAAC,CAAC,CAAC;QACL,CAAC;IACH,CAAC;IAED,uCAAmB,GAAnB;QACE,IAAM,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;QAC5D,KAAK,CAAC,OAAO,EAAE,CAAC;IAClB,CAAC;IAED,4BAAQ,GAAR;QACD,2CAA2C;QAC3C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,EAAC,IAAI,EAAC,WAAW,EAAC,EAAC,EAAC,IAAI,EAAC,oBAAoB,EAAC,CAAC,CAAC;IACtE,CAAC;IAjFQ;QAAR,oEAAK,EAAE;;+CAAkB;IACjB;QAAR,oEAAK,EAAE;;mDAAuB;IAJpB,SAAS;QAJrB,wEAAS,CAAC;YACT,QAAQ,EAAE,YAAY;WACG;SAC1B,CAAC;qFA0ByC;YACT,yFAAiB;YACb,uEAAgB;YACtB,sEAAe;YACf,oEAAe;YACb,8FAAW;YACT,uEAAkB;YACtB,MAAc;OAhCjC,SAAS,CAsFrB;IAAD,CAAC;AAAA;SAtFY,SAAS,e","file":"4.js","sourcesContent":["import {NgModule} from '@angular/core';\nimport {IonicPageModule} from 'ionic-angular';\nimport {LoginPage} from './login';\nimport {ComponentsModule} from \"../../components/components.module\";\nimport {TranslateModule} from \"@ngx-translate/core\";\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n    TranslateModule,\n    ComponentsModule,\n  ],\n})\nexport class LoginPageModule {\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import {NgModule} from '@angular/core';\nimport {MsgErrorComponent} from './msg-error/msg-error';\nimport {CommonModule} from \"@angular/common\";\n\n@NgModule({\n\tdeclarations: [MsgErrorComponent],\n\timports: [CommonModule],\n\texports: [MsgErrorComponent]\n})\nexport class ComponentsModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import {Component, Input} from '@angular/core';\nimport {FormControl} from \"@angular/forms\";\nimport {ValidationProvider} from \"../../providers/validation/validation\";\n\n\n@Component({\n  selector: 'msg-error',\n  template: '<div><span *ngIf=\"errorMessage !== false\">{{errorMessage}}</span></div>'\n})\nexport class MsgErrorComponent {\n\n  @Input() control: FormControl;\n  @Input() name: string;\n\n  constructor() { }\n\n  get errorMessage() {\n    for (let propertyName in this.control.errors) {\n      if (this.control.errors.hasOwnProperty(propertyName) && this.control.touched) {\n        return ValidationProvider.getValidatorErrorMessage(propertyName, this.control.errors[propertyName], this.name);\n      }\n    }\n\n    return false;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/msg-error/msg-error.ts","import {Component, Input} from '@angular/core';\nimport {\n  IonicPage,\n  LoadingController,\n  MenuController,\n  ModalController,\n  NavController,\n  ToastController\n} from 'ionic-angular';\nimport {AuthUserProvider} from \"../../providers/auth-user/auth-user\";\nimport {FormBuilder, FormControl, FormGroup, Validators} from \"@angular/forms\";\nimport {ModalErrorProvider} from '../../providers/modal-error/modal-error';\nimport {isArray} from \"ionic-angular/util/util\";\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html',\n})\nexport class LoginPage {\n\n\n  @Input() errorMsg: string;\n  @Input() displayError: boolean;\n\n  // formGroup = this.formBuilder.group({\n  //   password: ['', Validators.compose([\n  //     Validators.required,\n  //     Validators.minLength(6)\n  //   ])],\n  //\n  //   mail: ['', Validators.compose([\n  //     Validators.required,\n  //     Validators.minLength(6),\n  //     Validators.email]),\n  //      Validators.pattern('^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$')\n  //   ],\n  // });\n\n  formGroup = new FormGroup({\n    mail: new FormControl('', [Validators.required, Validators.email]),\n    password: new FormControl('', [Validators.required, Validators.minLength(6)]),\n  });\n\n  constructor(public navCtrl: NavController,\n              public loadingCtrl: LoadingController,\n              protected userProvider: AuthUserProvider,\n              public toastCtrl: ToastController,\n              public modalCtrl: ModalController,\n              public formBuilder: FormBuilder,\n              public errorProvider: ModalErrorProvider,\n              private menuCtrl: MenuController,) {\n\n  }\n\n  ionViewWillEnter() {\n    this.menuCtrl.enable(false);\n  }\n  login() {\n    if (this.formGroup.valid) {\n      let cargando = this.loadingCtrl.create({\n        spinner: 'hide',\n        content: \"<img src='assets/imgs/buho.png'>\",\n      });\n\n      this.userProvider.login(this.formGroup.value.mail, this.formGroup.value.password)\n        .then((data: any) => {\n          cargando.present();\n          if (data.success == 'ok') {\n            if(this.userProvider.isActivo){\n              this.navCtrl.setRoot(\"HomePage\");\n            }else{\n              this.errorProvider.obj.message = \"Por seguridad el usuario ha sido bloqueado\";\n              this.errorProvider.presentModal();\n              this.navCtrl.setRoot('LoginPage');\n            }\n            cargando.dismiss();\n          } else {\n            cargando.dismiss();\n          }\n        }).catch((error) => {\n        cargando.dismiss();\n        let mensaje = \"\";\n        if(isArray(error.error)){\n          error.error.forEach(data => {\n            mensaje += data.message + \"\\n\";\n          });\n        }else\n        mensaje = \"Usuario o contrase√±a incorrecta\";\n        this.errorProvider.obj.message = mensaje;\n        this.errorProvider.presentModal();\n      });\n    }\n  }\n\n  recuperarcontrasena() {\n    const modal = this.modalCtrl.create('RecoveryPasswordPage');\n    modal.present();\n  }\n\n  registro() {\n\t// this.navCtrl.push(\"RegNumberPhonePage\");\n\tthis.navCtrl.setPages([{page:\"LoginPage\"},{page:\"RegNumberPhonePage\"}])\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}